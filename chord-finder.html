<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guitar Chord Finder</title>
    <meta name="description" content="Discover how to play guitar chords with our interactive chord finder. Learn chord shapes, finger positions, and progressions for all major and minor chords.">
    <link rel="stylesheet" href="chords-style.css">
</head>

<body>
    <!-- main container -->
    <div class="container">
        <!-- left nav -->
        <nav clas="chords">
            <ul>
                <li><a href="#" title="how to play C chord" data-chord="C">C Chord</a></li>
                <li><a href="#" title="how to play C#/Db chord" data-chord="C#/Db">#C / bD Chord</a></li>
                <li><a href="#" title="how to play D chord" data-chord="D">D Chord</a></li>
                <li><a href="#" title="how to play D#/Eb chord" data-chord="D#/Eb">#D / bE Chord</a></li>
                <li><a href="#" title="how to play E chord" data-chord="E">E Chord</a></li>
                <li><a href="#" title="how to play F chord" data-chord="F">F Chord</a></li>
                <li><a href="#" title="how to play F#/Gb chord" data-chord="F#/Gb">#F / bG Chord</a></li>
                <li><a href="#" title="how to play G chord" data-chord="G">G Chord</a></li>
                <li><a href="#" title="how to play G#/Ab chord" data-chord="G#/Ab">#G / bA Chord</a></li>
                <li><a href="#" title="how to play A chord" data-chord="A">A Chord</a></li>
                <li><a href="#" title="how to play A#/Bb chord" data-chord="A#/Bb">#A / bB Chord</a></li>
                <li><a href="#" title="how to play B chord" data-chord="B">B Chord</a></li>
            </ul>
        </nav>
        <!-- right content -->
        <main>
            <div id="chordTest"></div>
            <div id="chordList"></div>
            <script src="script.js"></script>
            <script src="./node_modules/vexchords/dist/vexchords.dev.js"></script>
            <script type="module">

                const ChordBox = vexchords.ChordBox;
                const chords = [];
                function init(chart) {
                    var container = document.getElementById('chordTest');
                    container.innerHTML = '';
                    // Display preset chords (open chords)
                    for (var i = 0; i < chart.length; ++i) {
                        for (var j = 0; j < chart[i].chords.length; ++j) {
                            container.append(createChordElement(chart[i].chords[j]));
                        }
                    }
                    chords.forEach(chord => {
                        new ChordBox(chord.el, { width: 130, height: 150, defaultColor: '#444' }).draw(chord.struct);
                    });
                }

                function createChordElement(chordStruct) {
                    const chordbox = document.createElement('div');
                    chordbox.classList.add('chord');
                    const chordcanvas = document.createElement('div');
                    const chordname = document.createElement('div');
                    chordname.classList.add('chordname');
                    chordbox.append(chordcanvas);
                    chordbox.append(chordname);
                    chordname.append(chordStruct.name);

                    chords.push({ el: chordcanvas, struct: chordStruct });

                    return chordbox;
                }

                const navLinks = document.querySelectorAll('nav a');

                navLinks.forEach(link => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();
                        const chordName = this.dataset.chord;
                        // Get chord data from JSON files
                        async function fetchChords(filePath) {
                            try {
                                const response = await fetch(filePath);
                                if (!response.ok) {
                                    throw new Error('Network response failed');
                                }
                                return await response.json();
                            } catch (error) {
                                console.error('Error fetching chord data:', error);
                                return [];
                            }
                        }

                        switch (chordName) {
                            case 'C':
                                fetchChords('chords/cChord.json').then(data => init(data));
                                break;
                            case 'C#/Db':
                                fetchChords('chords/dbChord.json').then(data => init(data));
                                break;
                            case 'D':
                                fetchChords('chords/dChord.json').then(data => init(data));
                                break;
                            case 'D#/Eb':
                                fetchChords('chords/ebChord.json').then(data => init(data));
                                break;
                            case 'E':
                                fetchChords('chords/eChord.json').then(data => init(data));
                                break;
                            case 'F':
                                fetchChords('chords/fChord.json').then(data => init(data));
                                break;
                            case 'F#/Gb':
                                fetchChords('chords/gbChord.json').then(data => init(data));
                                break;
                            case 'G':
                                fetchChords('chords/gChord.json').then(data => init(data));
                                break;
                            case 'G#/Ab':
                                fetchChords('chords/abChord.json').then(data => init(data));
                                break;
                            case 'A':
                                fetchChords('chords/aChord.json').then(data => init(data));
                                break;
                            case 'A#/Bb':
                                fetchChords('chords/bbChord.json').then(data => init(data));
                                break;
                            case 'B':
                                fetchChords('chords/bChord.json').then(data => init(data));
                                break;
                            default:
                                fetchChords('chords/cChord.json').then(data => init(data));
                        }
                    });
                });
                window.onload = function () {
                    const cLink = document.querySelector('nav a[data-chord="C"]');
                    if (cLink) {
                        cLink.click();
                    }
                };
            </script>
        </main>
    </div>
</body>

</html>